(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),s=n.n(c),o=n(3),u=(n(12),function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("form",{id:"username_input_section"},r.a.createElement("input",{type:"text",id:"username",placeholder:"enter your username"}),r.a.createElement("button",{type:"submit",id:"login",onClick:function(t){t.preventDefault();var n=document.querySelector("#username").value;n&&e.set_username(n)}},"Login")))}),i=n(1),p=n.n(i),m=n(2),l=function(e,t){return new Promise(function(){var n=Object(m.a)(p.a.mark((function n(a,r){var c,s,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!window.fetch){n.next=9;break}return n.next=4,fetch("".concat("http://localhost:80","/get_posts"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e)});case 4:return c=n.sent,n.next=7,c.json();case 7:(s=n.sent)&&"success"===s.status?(o={},s.data.forEach((function(e){o[e.post_id]=e})),t(o),a(o)):(t({}),a(!1));case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),r(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}())},f=n(4),d=n.n(f),h=function(e,t,n){return new Promise(function(){var a=Object(m.a)(p.a.mark((function a(r,c){var s,o;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!window.fetch){a.next=17;break}return a.next=4,fetch("".concat("http://localhost:80","/delete_post"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t)});case 4:return s=a.sent,a.next=7,s.json();case 7:if("success"!==(o=a.sent).status){a.next=14;break}return a.next=11,l(e,n);case 11:r(),a.next=17;break;case 14:console.log(o),alert(o),r();case 17:a.next=22;break;case 19:a.prev=19,a.t0=a.catch(0),c(a.t0);case 22:case"end":return a.stop()}}),a,null,[[0,19]])})));return function(e,t){return a.apply(this,arguments)}}())},w=function(e,t,n,a){return new Promise(function(){var r=Object(m.a)(p.a.mark((function r(c,s){var o,u;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!window.fetch){r.next=16;break}return r.next=4,fetch("".concat("http://localhost:80","/edit_post"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t,"&&post_message=").concat(n)});case 4:return o=r.sent,r.next=7,o.json();case 7:if("success"!==(u=r.sent).status){r.next=14;break}return r.next=11,l(e,a);case 11:c(),r.next=16;break;case 14:alert(u.message),c();case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),s(r.t0);case 21:case"end":return r.stop()}}),r,null,[[0,18]])})));return function(e,t){return r.apply(this,arguments)}}())},v=function(e,t,n,a){return new Promise(function(){var r=Object(m.a)(p.a.mark((function r(c,s){var o,u;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!window.fetch){r.next=16;break}return r.next=4,fetch("".concat("http://localhost:80","/reply_to_post"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t,"&&post_message=").concat(n)});case 4:return o=r.sent,r.next=7,o.json();case 7:if("success"!==(u=r.sent).status){r.next=14;break}return r.next=11,l(e,a);case 11:c(),r.next=16;break;case 14:alert(u.message),c();case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),s(r.t0);case 21:case"end":return r.stop()}}),r,null,[[0,18]])})));return function(e,t){return r.apply(this,arguments)}}())},_=function(e,t,n){return new Promise(function(){var a=Object(m.a)(p.a.mark((function a(r,c){var s,o,u;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!window.fetch){a.next=9;break}return a.next=4,fetch("".concat("http://localhost:80","/get_comments"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t)});case 4:return s=a.sent,a.next=7,s.json();case 7:"success"===(o=a.sent).status?(u={},o.data.forEach((function(e){u[e.post_id]=e})),n(u),r()):(n({}),alert(o.message),r());case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),c(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}())},b=function(e,t,n){return new Promise(function(){var a=Object(m.a)(p.a.mark((function a(r,c){var s,o,u;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!window.fetch){a.next=9;break}return a.next=4,fetch("".concat("http://localhost:80","/get_comments"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t)});case 4:return s=a.sent,a.next=7,s.json();case 7:"success"===(o=a.sent).status?(u={},o.data.forEach((function(e){u[e.post_id]=e})),console.log("comments got are"),console.log(u),n(u),r()):(alert(o.message),r());case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),c(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}())},x=function(e,t,n,a){return new Promise(function(){var r=Object(m.a)(p.a.mark((function r(c,s){var o,u;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!window.fetch){r.next=16;break}return r.next=4,fetch("".concat("http://localhost:80","/reply_to_post"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t,"&&post_message=").concat(n)});case 4:return o=r.sent,r.next=7,o.json();case 7:if("success"!==(u=r.sent).status){r.next=14;break}return r.next=11,b(e,t,a);case 11:c(),r.next=16;break;case 14:alert(u.message),c();case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),s(r.t0);case 21:case"end":return r.stop()}}),r,null,[[0,18]])})));return function(e,t){return r.apply(this,arguments)}}())},k=function(e,t,n,a){return new Promise(function(){var r=Object(m.a)(p.a.mark((function r(c,s){var o,u,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!window.fetch){r.next=9;break}return r.next=4,fetch("".concat("http://localhost:80","/delete_post"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t)});case 4:return o=r.sent,r.next=7,o.json();case 7:"success"===(u=r.sent).status?(delete(i=JSON.parse(JSON.stringify(n)))[t],a(i),c()):(a(n),console.log(u),alert(u),c());case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),s(r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}())},y=function(e,t,n,a,r){return new Promise(function(){var c=Object(m.a)(p.a.mark((function c(s,o){var u,i,m;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,!window.fetch){c.next=9;break}return c.next=4,fetch("".concat("http://localhost:80","/edit_post"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_id=").concat(t,"&&post_message=").concat(n)});case 4:return u=c.sent,c.next=7,u.json();case 7:"success"===(i=c.sent).status?((m=JSON.parse(JSON.stringify(a)))[t].post.post_message=n,r(m),s()):(alert(i.message),s());case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),o(c.t0);case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}())},g=(n(15),function e(t){var n=Object(a.useState)({}),c=Object(o.a)(n,2),s=c[0],u=c[1],i=function(){var e=Object(m.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=window.prompt("enter a reply message"))){e.next=4;break}return e.next=4,x(t.username,t.comment_data.post_id,n,u);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t.username,t.comment_data.post_id,t.previous_comment,t.previous_set_comment);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=window.prompt("enter a new message"))||!t.previous_comment){e.next=4;break}return e.next=4,y(t.username,t.comment_data.post_id,n,t.previous_comment,t.previous_set_comment);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t.username,t.comment_data.post_id,u);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"comment_section"},t.comment_data.post.post_message,"\xa0  \xa0",t.comment_data.username===t.username?"You":t.comment_data.username,"\xa0 \u261b \xa0",d()(t.comment_data.post.datetime).calendar({sameElse:"DD/MM/YYYY"}),t.comment_data.username===t.username?r.a.createElement("div",null,r.a.createElement("button",{onClick:f},"Edit"),r.a.createElement("button",{onClick:l},"Delete")):r.a.createElement("div",null,r.a.createElement("button",{onClick:i},"Reply")),Object.keys(s).length<1?r.a.createElement("div",null,r.a.createElement("button",{onClick:h},"Show Comments \xa0 \u2193")):null,Object.keys(s).length>0?Object.keys(s).map((function(n){return r.a.createElement(e,Object.assign({},t,{previous_comment:s,previous_set_comment:u,key:n,comment_data:s[n]}))})):null))}),O=(n(16),function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),c=n[0],s=n[1],u=function(){var t=Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(e.username,e.post_data.post_id,e.set_posts);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),alert("something gone wrong");case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),i=function(){var t=Object(m.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=window.prompt("Enter new post message"))){t.next=4;break}return t.next=4,w(e.username,e.post_data.post_id,n,e.set_posts);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(m.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=window.prompt("reply to the post"))){t.next=4;break}return t.next=4,v(e.username,e.post_data.post_id,n,e.set_posts);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e.username,e.post_data.post_id,s);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"post_container"},r.a.createElement("div",{className:"post_message_container"},r.a.createElement("p",{className:"post_message"},e.post_data.post.post_message),r.a.createElement("p",{className:"post_message_info"},e.post_data.username===e.username?"You":e.post_data.username,"\xa0 \u261b \xa0",d()(e.post_data.post.datetime).calendar({sameElse:"DD/MM/YYYY"}))),r.a.createElement("div",{className:"post_options_container"},e.post_data.username===e.username?r.a.createElement("div",{className:"post_options"},r.a.createElement("button",{className:"post_options_button",onClick:i},"Edit"),r.a.createElement("button",{onClick:u,className:"post_options_button"},"Delete")):r.a.createElement("div",{className:"post_options"},r.a.createElement("button",{className:"post_options_button",onClick:l},"Reply"))),r.a.createElement("div",{className:"post_comments_container"},Object.keys(c).length<1?r.a.createElement("div",{className:"post_comments_container_box"},r.a.createElement("button",{className:"post_options_button",onClick:f},"Show Comments \xa0 \u2193")):null,Object.keys(c).length>0?Object.keys(c).map((function(t){return r.a.createElement(g,Object.assign({previous_comment:c,previous_set_comment:s},e,{key:t,comment_data:c[t]}))})):null)))}),E=function(e,t,n,a){return new Promise(function(){var r=Object(m.a)(p.a.mark((function r(c,s){var o,u;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!window.fetch){r.next=17;break}return r.next=4,fetch("".concat("http://localhost:80","/save_post"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(e,"&&post_message=").concat(t)});case 4:return o=r.sent,r.next=7,o.json();case 7:if("success"!==(u=r.sent).status){r.next=14;break}return r.next=11,n(e,a);case 11:c(),r.next=17;break;case 14:alert(u.message),console.log(u),c();case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),s(r.t0);case 22:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(e,t){return r.apply(this,arguments)}}())},j=(n(17),function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),c=n[0],s=n[1];Object(a.useEffect)((function(){Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e.username,s);case 2:t.sent;case 3:case"end":return t.stop()}}),t)})))()}),[]);var u=function(){var t=Object(m.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=window.prompt("enter new message to post"))){t.next=4;break}return t.next=4,E(e.username,n,l,s);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement("div",{id:"post_screen"},Object.keys(c).reverse().map((function(t){return r.a.createElement(O,{set_posts:s,username:e.username,post_data:c[t],key:t})})),r.a.createElement("div",{id:"post_message_btn_container"},r.a.createElement("button",{id:"post_message_btn",onClick:u},"POST"))))}),S=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1];return r.a.createElement(a.Fragment,null,r.a.createElement(u,{set_username:c}),""!==n?r.a.createElement(j,{username:n}):null)},C=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.68c731c3.chunk.js.map